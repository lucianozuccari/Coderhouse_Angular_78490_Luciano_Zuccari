<div class="main-container">
  <div class="header-actions">
    <input
      matInput
      (keyup)="applyFilter($event)"
      class="filter-input"
      placeholder="Filtro"
      #input
    />
    <button id="create" class="btn-create" mat-flat-button color="primary" routerLink="create">
      Agregar estudiante
    </button>
  </div>

  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource">
      <!-- Name -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let row">{{ row.name }}</td>
      </ng-container>

      <!-- Birthdate -->
      <ng-container matColumnDef="birthdate">
        <th mat-header-cell *matHeaderCellDef>Birthdate</th>
        <td mat-cell *matCellDef="let row">{{ row.birthdate | date : 'dd/MM/yyyy' }}</td>
      </ng-container>

      <!-- Species -->
      <ng-container matColumnDef="species">
        <th mat-header-cell *matHeaderCellDef>Species</th>
        <td mat-cell *matCellDef="let row">{{ row.species }}</td>
      </ng-container>

      <!-- Specialization -->
      <ng-container matColumnDef="specialization">
        <th mat-header-cell *matHeaderCellDef>Specialization</th>
        <td mat-cell *matCellDef="let row">{{ row.specialization }}</td>
      </ng-container>

      <!-- Rank -->
      <ng-container matColumnDef="rank">
        <th mat-header-cell *matHeaderCellDef>Rank</th>
        <td mat-cell *matCellDef="let row">{{ row.rank }}</td>
      </ng-container>

      <!-- Actions -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let row" class="column-actions">
          <button mat-icon-button matTooltip="Edit" routerLink="edit/{{ row.id }}">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button matTooltip="Delete" (click)="onDelete(row)">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Header and Row -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <!-- No Data Row -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" [attr.colspan]="displayedColumns.length">
          No data matching the filter "{{ input.value }}"
        </td>
      </tr>
    </table>

    <mat-paginator
      [pageSize]="10"
      [pageSizeOptions]="[5, 10, 25, 100]"
      aria-label="Select page of courses"
    ></mat-paginator>
  </div>
</div>

<!-- Modal de confirmaciÃ³n -->
<delete-confirm-modal
  [isVisible]="isModalVisible"
  [isDeleting]="isDeleting"
  [confirmMessage]="getConfirmMessage()"
  [extraInfoTemplate]="TemplateInfoTpl"
  (closeModalEvent)="closeModal()"
  (confirmDeleteEvent)="confirmDelete()"
>
</delete-confirm-modal>

<ng-template #TemplateInfoTpl>
  <div class="form-info">
    <p><strong>Name:</strong> {{ studentToDelete?.name }}</p>
    <p><strong>Birth date:</strong> {{ studentToDelete?.birthdate }}</p>
    <p><strong>Species:</strong> {{ studentToDelete?.species }}</p>
    <p><strong>Specialization:</strong> {{ studentToDelete?.specialization }}</p>
    <p><strong>Rank:</strong> {{ studentToDelete?.rank }}</p>
  </div>
</ng-template>
