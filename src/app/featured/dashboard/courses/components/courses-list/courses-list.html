<div class="main-container">
  <div class="header-actions">
    <input matInput (keyup)="applyFilter($event)" class="filter-input" placeholder="Filtro" #input />
    <button id="create" class="btn-create" mat-flat-button color="primary" routerLink="create">Crear Curso</button>
  </div>

  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource">
      <!-- Title -->
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>Title</th>
        <td mat-cell *matCellDef="let row">{{ row.title }}</td>
      </ng-container>

      <!-- Description -->
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let row">{{ row.description }}</td>
      </ng-container>

      <!-- Category -->
      <ng-container matColumnDef="category">
        <th mat-header-cell *matHeaderCellDef>Category</th>
        <td mat-cell *matCellDef="let row">{{ row.category }}</td>
      </ng-container>

      <!-- Level -->
      <ng-container matColumnDef="level">
        <th mat-header-cell *matHeaderCellDef>Level</th>
        <td mat-cell *matCellDef="let row">{{ row.level }}</td>
      </ng-container>

      <!-- Rank Required -->
      <ng-container matColumnDef="rankRequired">
        <th mat-header-cell *matHeaderCellDef>Rank Required</th>
        <td mat-cell *matCellDef="let row">{{ row.rankRequired }}</td>
      </ng-container>

      <!-- Language -->
      <ng-container matColumnDef="language">
        <th mat-header-cell *matHeaderCellDef>Language</th>
        <td mat-cell *matCellDef="let row">{{ row.language }}</td>
      </ng-container>

      <!-- Authority -->
      <ng-container matColumnDef="authority">
        <th mat-header-cell *matHeaderCellDef>Authority</th>
        <td mat-cell *matCellDef="let row">{{ row.authority }}</td>
      </ng-container>

      <!-- Actions -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let row" class="column-actions">
          <button mat-icon-button matTooltip="Edit" routerLink="edit/{{ row.id }}">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button matTooltip="Delete" (click)="onDelete(row)">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Header and Row -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <!-- No Data Row -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" [attr.colspan]="displayedColumns.length">
          No data matching the filter "{{ input.value }}"
        </td>
      </tr>
    </table>

    <mat-paginator
      [pageSize]="10"
      [pageSizeOptions]="[5, 10, 25, 100]"
      aria-label="Select page of courses"
    ></mat-paginator>
  </div>
</div>

<!-- Modal de confirmaciÃ³n -->
<delete-confirm-modal
  [isVisible]="isModalVisible"
  [isDeleting]="isDeleting"
  [confirmMessage]="getConfirmMessage()"
  [extraInfoTemplate]="TemplateInfoTpl"
  (closeModalEvent)="closeModal()"
  (confirmDeleteEvent)="confirmDelete()"
>
</delete-confirm-modal>

<ng-template #TemplateInfoTpl>
  <div class="form-info">
    <p><strong>Title:</strong> {{ courseToDelete?.title }}</p>
    <p><strong>Description:</strong> {{ courseToDelete?.description }}</p>
  </div>
</ng-template>
